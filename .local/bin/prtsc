#!/bin/bash

op=$(echo -e " Screen\n Window\n Selection" | wofi -i --sort-order=alphabetical --dmenu | awk '{print tolower($2)}' )

name="$HOME/Imagens/Capturas de ecrã/Captura de ecrã de "
name+=$(date '+%Y-%m-%d %H-%M-%S')
name+=".png"

case $op in
	screen)
        sleep 0.4s
		grim "$name"
		;;
	window)
        w_pos=`hyprctl activewindow | grep 'at:' | cut -d':' -f2 | tr -d ' ' | tail -n1`
        w_size=`hyprctl activewindow | grep 'size:' | cut -d':' -f2 | tr -d ' ' | tail -n1 | sed s/,/x/g`
        sleep 0.4s
        grim -g "$w_pos $w_size" "$name"
		;;
	selection)
		slurp | grim -g - "$name"
		;;
esac

wl-copy < "$name"
